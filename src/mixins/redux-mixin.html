
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">
<script>
  // Setup a Redux store
  const initialState = {
    pan: {
      panDiameter: 1.2192,
      openingDiameter: 0.4826,
      wallWidth: 0.508,
      brimWidth: 0.93345, 
      fillVolume: 0.158,
      locationName: '',
      companyName: '',
      equipmentName: 'Fastcoat 48"',
      vendorName: "O'Hara",
      nickname: ''
    },
    tablet: {
      shape: 'round',
      length: 0.01,
      width: 0.0075,
      totalThickness: 0.00475,
      bandThickness: 0.00275,
      weight: 0.400,
      productName: 'Colorcon Round Placebo',
      formulationName: 'Placebo (WP123456)',
      companyName: 'Colorcon',
      toolingName: '10mm Round'
    }
  };
  
  const panReducer = (state, action) => {
    if(!state) {return initialState;}
    let pan = state;
    switch(action.type) {
    
      case 'SET_PAN_DIAMETER':
        pan.panDiameter = action.value;
        break;
      
      case 'SET_PAN_OPENING_DIAMETER':
        pan.openingDiameter = action.value;
        break;
        
      case 'SET_PAN_BRIM_WIDTH':
        pan.brimWidth = action.value;
        break;
        
      case 'SET_PAN_WALL_WIDTH':
        pan.wallWidth = action.value;
        break;  
        
      case 'SET_PAN_VENDOR_NAME':
        pan.vendorName = action.value;
        break;
      
      case 'SET_PAN_NICKNAME':
        pan.nickname = action.value;
        break;
        
      case 'SET_PAN_EQUIPMENT_NAME':
        pan.equipmentName = action.value;
        break;  
        
      case 'SET_PAN_COMPANY_NAME':
        pan.companyName = action.value;
        break;  
        
      case 'SET_PAN_LOCATION_NAME':
        pan.locationName = action.value;
        break;  
        
      case 'SET_PAN_DESCRIPTION':
        pan.description = action.value;
        break;  
        
      case 'SET_BATCH_VOLUME':
        pan.fillVolume = action.value;
        break;
        
      case 'LOAD_PAN':
        pan.panDiameter = action.value.panDiameter;
        pan.openingDiameter = action.value.openingDiameter;
        pan.wallWidth = action.value.wallWidth;
        pan.brimWidth = action.value.brimWidth;
        pan.vendorName = action.value.vendorName;
        pan.companyName = action.value.companyName;
        pan.locationName = action.value.locationName;
        pan.nickname = action.value.nickname;
        pan.equipmentName = action.value.equipmentName;
        break;
      
      default: 
        return state;
    }
    return Object.assign({}, pan);
  };
  
  const tabletReducer = (state, action) => {
    if(!state) {return initialState;}
    let tablet = state;
      
    switch(action.type) {
        
      case 'SET_TABLET_SHAPE':
        tablet.shape = action.value;
        break;
        
      case 'SET_TABLET_LENGTH':
        tablet.length = action.value;
        break;
        
      case 'SET_TABLET_WIDTH':
        tablet.width = action.value;
        break;
        
      case 'SET_TABLET_TOTAL_THICKNESS':
        tablet.totalThickness = action.value;
        break;
        
      case 'SET_TABLET_BAND_THICKNESS':
        tablet.bandThickness = action.value;
        break;
        
      case 'SET_TABLET_WEIGHT':
        tablet.weight = action.value;
        break;
        
      case 'SET_TABLET_PRODUCT_NAME':
        tablet.productName = action.value;
        break;
        
      case 'SET_TABLET_FORMULATION_NAME':
        tablet.formulationName = action.value;
        break;
        
      case 'SET_TABLET_DESCRIPTION':
        tablet.description = action.value;
        break;
        
      case 'SET_TABLET_TOOLING_NAME':
        console.log(action.value);
        tablet.toolingName = action.value;
        break;
        
      case 'SET_TABLET_COMPANY_NAME':
        tablet.companyName = action.value;
        break;
        
      case 'LOAD_TABLET':
        // tablet = Object.assign(tablet, action.tablet);
        break;
      
      default: 
        return state;
    }
    
    return Object.assign({}, tablet);
    
  };
  
  const reducer = (state = initialState, action) => {
    return {
      pan: panReducer(state.pan, action),
      tablet: tabletReducer(state.tablet, action)
    };
  };
  
  const store = Redux.createStore(reducer);
  
  // Create the Polymer mixin
  ReduxMixin = PolymerRedux(store);
</script>
